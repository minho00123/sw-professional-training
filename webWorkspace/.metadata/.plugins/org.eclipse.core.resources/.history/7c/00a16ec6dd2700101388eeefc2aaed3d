<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>게시판</title>
<link rel="stylesheet" type="text/css" href="../css/frame.css">
<style type="text/css">
    table {
        width: 80%;
        border-collapse: collapse;
        margin: 10px auto;
    }

    table, tr>th, tr>td {
        border: 1px solid gray;
    }

    table tr>td {
        height: 35px;
    }

    table td>a {
        display: block;
        height: 35px;
        text-decoration: none;
        color: gray;
        line-height: 30px;
        text-indent: 15px;
    }

    .search-form {
        width: 80%;
        margin: 20px auto;
        text-align: right;
    }

    .search-form input[type="text"] {
        width: 200px;
        padding: 5px;
        font-size: 14px;
    }

    .search-form input[type="submit"] {
        padding: 5px 10px;
        font-size: 14px;
        background-color: #4a90e2;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .search-form input[type="submit"]:hover {
        background-color: #3b7dc4;
    }

    p {
        text-align: center;
    }
</style>
<script type="text/javascript" src="../js/jquery-1.12.4.min.js"></script>
<script type="text/javascript">
    $(function() {
        $('tbody>tr').map(function(idx, ele) {
            var alink = $(ele).find('td').children().first().clone();
            alink.html('');
            $(ele).first().children().not(':eq(0)').wrapInner(alink);
        });
    });
</script>
</head>
<body>
    <jsp:include page="../layout/header.jsp"></jsp:include>
    <jsp:include page="../layout/menu.jsp">
        <jsp:param value=".." name="path" />
    </jsp:include>

    <h2 style="text-align: center;">게시판</h2>

    <!-- 🔍 검색 폼 추가 -->
    <div class="search-form">
        <form action="search.do" method="get">
            <input type="text" name="keyword" placeholder="제목 검색..." />
            <input type="submit" value="검색" />
        </form>
    </div>

    <table>
        <thead>
            <tr>
                <th>no</th>
                <th>subject</th>
                <th>id</th>
                <th>nalja</th>
            </tr>
        </thead>
        <tbody>
            <%@ page import="java.util.*, com.mvc.model.*" %>
            <%
                List<BbsDto> list = (List<BbsDto>) request.getAttribute("alist");
                if (list != null && !list.isEmpty()) {
                    for (BbsDto bean : list) {
            %>
            <tr>
                <td><a href="detail.do?num=<%=bean.getNum()%>"><%=bean.getNum()%></a></td>
                <td><%=bean.getSub()%></td>
                <td><%=bean.getId()%></td>
                <td><%=bean.getNalja()%></td>
            </tr>
            <%
                    }
                } else {
            %>
            <tr>
                <td colspan="4" style="text-align: center;">게시글이 없습니다.</td>
            </tr>
            <%
                }
            %>
        </tbody>
    </table>

    <p>
        <%
            int begin = (Integer) request.getAttribute("pageBegin");
            int end = (Integer) request.getAttribute("pageEnd");
            for (int i = begin; i <= end; i++) {
        %>
        <a href="list.do?page=<%=i%>">[<%=i%>]</a>
        <%
            }
        %>
    </p>

    <p>
        <a href="add.do">입력</a>
    </p>

    <jsp:include page="../layout/footer.jsp"></jsp:include>
</body>
</html>
