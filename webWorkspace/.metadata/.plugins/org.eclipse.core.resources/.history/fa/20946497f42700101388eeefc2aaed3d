<%@ page contentType="text/html; charset=UTF-8" language="java"%>
<%@ page import="java.util.List"%>
<%@ page import="com.mvc.model.*"%>
<!DOCTYPE html>
<html>
<head>
<title>📋 JSP 게시판</title>
<style>
/* 기존 스타일 유지 */
</style>
</head>
<body>
	<div class="container">
		<h2>📋 JSP 게시판</h2>

		<div class="search-box">
			<form method="get" action="/">
				<input type="text" name="keyword" value="<%= request.getAttribute("keyword") != null ? request.getAttribute("keyword") : "" %>" placeholder="검색어 입력">
				<input type="submit" value="검색">
			</form>
			<div class="write-btn">
				<a href="write.jsp">✏️ 글쓰기</a>
			</div>
		</div>

		<table>
			<tr>
				<th>번호</th>
				<th>제목</th>
				<th>작성자</th>
				<th>작성일</th>
			</tr>
			<%
				List<BoardDto> boardList = (List<BoardDto>) request.getAttribute("dataList");
				int currentPage = (Integer) request.getAttribute("currentPage");
				int totalPages = (Integer) request.getAttribute("totalPages");
			%>
			<%
				for (BoardDto board : boardList) {
			%>
			<tr>
				<td><%=board.getId()%></td>
				<td style="text-align: left;"><a href="detail.jsp?id=<%=board.getId()%>"><%=board.getTitle()%></a></td>
				<td><%=board.getUserId()%></td>
				<td><%=board.getCreatedAt()%></td>
			</tr>
			<%
				}
			%>
		</table>

		<div class="pagination">
			<%
				for (int i = 1; i <= totalPages; i++) {
					if (i == currentPage) {
			%>
			<a class="active" href="?page=<%=i%>&keyword=<%=request.getAttribute("keyword") != null ? request.getAttribute("keyword") : "" %>"><%=i%></a>
			<%
					} else {
			%>
			<a href="?page=<%=i%>&keyword=<%=request.getAttribute("keyword") != null ? request.getAttribute("keyword") : "" %>"><%=i%></a>
			<%
					}
				}
			%>
		</div>
	</div>
</body>
</html>
